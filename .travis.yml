language: rust
rust:
- stable
- beta
- nightly
matrix:
  fast_finish: true
  allow_failures:
  - rust: nightly
  include:
  - rust: stable
    env: NAME='linting'
    before_script:
    - rustup component add rustfmt-preview
    - rustup component add clippy-preview
    script:
    - cargo fmt --all -- --check
    - cargo clippy
  - env: NAME='cargo-travis'
    sudo: required
    before_script:
    - cargo install cargo-update || echo "cargo-update already installed"
    - cargo install cargo-travis || echo "cargo-travis already installed"
    - cargo install-update -a
    script:
    - |
      cargo build --verbose &&
      cargo coverage --verbose &&
      bash <(curl -s https://codecov.io/bash) -s target/kcov
    addons:
      apt:
        packages:
        - libcurl4-openssl-dev
        - libelf-dev
        - libdw-dev
        - binutils-dev
        - cmake
before_script:
- |
  cargo install --git https://github.com/semantic-rs/semantic-rs --debug &&
  export PATH=$HOME/.cargo/bin:$PATH &&
  git config --global user.name herzrasen &&
  git config --global user.email dennis.mellert@gmail.com
script: |-
  export RUST_BACKTRACE=1 &&
  cargo build --verbose &&
  cargo test --verbose
after_success:
- CI=true semantic-rs
env:
  global:
  - secure: PGVxIRcGrSTlzR/dk+YuDQIQC/h8Lh0R4g0tk0Ve2pH25oOjxgxhR+PyYKQErY08JzRTeWz+8zUC2cfFWZ3gTFofszTMNtjy+RuuflAoAwOIKeNKcEFCLendDEQaYW0iWUpwmECy950tQJHkhOZZNAK4E+TolIPChlRM4ZOAP/IpEZJexTW7SwpH4pS2liGD7i4G5CwoHA8rC6nqIt/mHLZ5zjW17SBfF00MzidCOKvEicKuJ7Xagiw9uIX2qRNyntkhORM5vfcadeVr5MqfS+fb9xidTNGH6/ocT6xa/79jyHMqP2v0S7SuRMtKdVxrXtRCh5UjQVII2//Va91JIJs03wcZiE8jeuc78yL65GohSkZO1f8FwTnBBddAjcBL6Q0g8PRVbHCYT13RjrgdBjL5c+4wrllidtNhBPEAEZ8OXFWs2UL7ZpYsKsqpuN947MO/PbKGdPKZiQtCUWEHe8QyNh51zuy584ZUN+tjlZAMgpVX2XLyRiKTN6c0TUH1qHSm69kwOynSqxMdCLd/Mr2KwYPodvHw/tL1GnCJbapHCsn6I8DsNk9vyvuuKesQ1hHrbzn5OKTwnXUfg4opI0zRoNXTBC4cSUb1XDUUh0VfbdZoBuki6TdzdFejaHLBirQ6ffYsdVcTRTfab8KOdbgUMYrHL6RSqtN1El272HE=
  - secure: pSgKPdkBJHNrrgqM/SzMwsp5DM2HNYb8ZCg1cQxTHYNpTEenH1ZQTyCGyzGxHIs/QGggHCu8xU2ultlUbFKzXERTYhJOVOwvlOL2Vl3ski7PICKwRY/1/Vx6m9HQUdXCWKi9evWT1ii9ppsXuwrZBm8WT4QY58YBFdlt8SVkKibrAoD+OSzX1eesryWhTiFrKueAo6hHRoavQvD5FJL22nBBeZdbT8BMXWWpkJuHB5IpbVQB1/jQvO0zu4IiH6Y8icBmzNdyR4MRrIEzio8eVSY3Pn8d3ZQ0JfhJ83fkc9ZUx6JVmuoLMV0G3MpC3tunOZGL0jMMV0+eZ45SMW/QWTSTr1vrZLbmYP47oUN1uFqViZDD4Xyb+kA1FtrM1tcGkfsjnbSj7zYp8vU+AuI3u+3GtzyfA19UyY75PzNKtNhmbWLMTH0GKN5TUfZhDA22Zd9dJYxOpLB0UnEf35gh9B6n6YcQGTvWd3gFHQh1LZEnog1aaaTVnRbabyMZsviBC2rmSxIwcqp6jfkMOy+N2UgHsewHQHlUY84+Ez73cQeccdJDu84dGcHhTOQT/ndQY79/JTfyKIoBkqIJPXG1PrWo88SAEhN7mm4cpr81hMQxNuEPbc2jMrKyQ/1qt7xVE0JZgpPmYf48FXvnSJvWjSO5ZuRcJ++rZIpvUmRDZXo=
