language: rust
rust:
- stable
- beta
- nightly
matrix:
  fast_finish: true
  allow_failures:
  - rust: nightly
  include:
  - rust: stable
    env: NAME='linting'
    before_script:
    - rustup component add rustfmt-preview
    - rustup component add clippy-preview
    script:
    - cargo fmt --all -- --check
    - cargo clippy
  - env: NAME='cargo-travis'
    sudo: required
    before_script:
    - cargo install cargo-update || echo "cargo-update already installed"
    - cargo install cargo-travis || echo "cargo-travis already installed"
    - cargo install-update -a
    script:
    - |
      cargo build --verbose &&
      cargo coverage --verbose &&
      bash <(curl -s https://codecov.io/bash) -s target/kcov
    addons:
      apt:
        packages:
        - libcurl4-openssl-dev
        - libelf-dev
        - libdw-dev
        - binutils-dev
        - cmake
before_script:
- |
  cargo install --git https://github.com/semantic-rs/semantic-rs --debug &&
  export PATH=$HOME/.cargo/bin:$PATH &&
  git config --global user.name herzrasen &&
  git config --global user.email dennis.mellert@gmail.com
script: |-
  export RUST_BACKTRACE=1 &&
  cargo build --verbose &&
  cargo test --verbose
after_success:
- RUST_LOG=debug semantic-rs
env:
  global:
  - secure: pSgKPdkBJHNrrgqM/SzMwsp5DM2HNYb8ZCg1cQxTHYNpTEenH1ZQTyCGyzGxHIs/QGggHCu8xU2ultlUbFKzXERTYhJOVOwvlOL2Vl3ski7PICKwRY/1/Vx6m9HQUdXCWKi9evWT1ii9ppsXuwrZBm8WT4QY58YBFdlt8SVkKibrAoD+OSzX1eesryWhTiFrKueAo6hHRoavQvD5FJL22nBBeZdbT8BMXWWpkJuHB5IpbVQB1/jQvO0zu4IiH6Y8icBmzNdyR4MRrIEzio8eVSY3Pn8d3ZQ0JfhJ83fkc9ZUx6JVmuoLMV0G3MpC3tunOZGL0jMMV0+eZ45SMW/QWTSTr1vrZLbmYP47oUN1uFqViZDD4Xyb+kA1FtrM1tcGkfsjnbSj7zYp8vU+AuI3u+3GtzyfA19UyY75PzNKtNhmbWLMTH0GKN5TUfZhDA22Zd9dJYxOpLB0UnEf35gh9B6n6YcQGTvWd3gFHQh1LZEnog1aaaTVnRbabyMZsviBC2rmSxIwcqp6jfkMOy+N2UgHsewHQHlUY84+Ez73cQeccdJDu84dGcHhTOQT/ndQY79/JTfyKIoBkqIJPXG1PrWo88SAEhN7mm4cpr81hMQxNuEPbc2jMrKyQ/1qt7xVE0JZgpPmYf48FXvnSJvWjSO5ZuRcJ++rZIpvUmRDZXo=
  - secure: UQ5rjG3UR0+wE5MNxN79tXhI55nfmMC8tuEFNx4nOW9h/Fc55AfzkcXldP96COAzWE/ifC8qZK8gW/p6xW4VxqcYEGNdtw8I3E62x+P5vMrzJxPU5hAEiWIsK5yK8octbt2BwZr1s5tHwV3e4YKGlBXTL+cF8fccw5E7RQcWwcub4hIHAw8JyyjGAWU6Dkyvhhhiw4+psx252K7K8eQvPnMTo86Mh1RyDccgupirTZZU4kq7yz9+Yi1ag99BQfiwdCdZ62l30Lg9kkvndz+glf+Kzpx6v5tA96Q3Jj/kQKkdcm2PGYu4414uO+w8vApk00a2XyOBjwDQZijVchchoPQlbsV4+unxvqt6ThmI6VvqpeaDFuDq8tEHbAF1MfRYELHMJuBXXZ8YjgfDRkGZUwCrwUdmz34gqS4wWLNadMzDizs/I9ksGryb2Yes0V8k7fNTwkzLpQQPlWYbJfjPTG8MSXs6dFTC9iWqcgXWPoY1h41WAP2ueZxOFlR9HoD9SInHRte7uuiTxQesbIjaubeQd/tqpSBSlobiyczYbG29QgbuOdeiRYwFunG5aHk/T4pHpxz6aRx/0eNhhW5ovjK9nZ7jHWWhkBpuKhaxVqx1UfdO6kC8Xzc0FyBpxF1zZxxf64hDgJOz9zjHmlIo6xzhWzvnBLj2MQ5Dpmx6GHI=
